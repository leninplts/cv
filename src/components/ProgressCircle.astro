---
export interface Props {
  percentage: number;
  label: string;
  size?: number;
}

const { percentage, label, size = 80 } = Astro.props;
const radius = (size - 8) / 2;
const circumference = 2 * Math.PI * radius;
const strokeDasharray = circumference;
const strokeDashoffset = circumference - (percentage / 100) * circumference;
---

<div class="flex flex-col items-center gap-2">
  <div class="relative" style={`width: ${size}px; height: ${size}px;`}>
    <svg
      class="transform -rotate-90"
      width={size}
      height={size}
      viewBox={`0 0 ${size} ${size}`}
    >
      <!-- Círculo de fondo -->
      <circle
        cx={size / 2}
        cy={size / 2}
        r={radius}
        stroke="#374151"
        stroke-width="4"
        fill="transparent"
        class="opacity-20"
      />
      <!-- Círculo de progreso -->
      <circle
        cx={size / 2}
        cy={size / 2}
        r={radius}
        stroke="#fbbf24"
        stroke-width="4"
        fill="transparent"
        stroke-linecap="round"
        style={`stroke-dasharray: ${strokeDasharray}; stroke-dashoffset: ${strokeDashoffset}; transition: stroke-dashoffset 0.5s ease-in-out;`}
      />
    </svg>
    <!-- Porcentaje en el centro -->
    <div class="absolute inset-0 flex items-center justify-center">
      <span class="text-zinc-400 text-lg">{percentage}%</span>
    </div>
  </div>
  <!-- Label debajo -->
  <span class="text-zinc-400 text-sm">{label}</span>
</div>